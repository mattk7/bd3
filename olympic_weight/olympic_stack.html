<html>
    <head>
        <script src="d3.min.js"></script>
        <title>Stacked Weight</title>
        
        <style>
            .stack{
                border: 1px solid #555;
            }
        </style>
        
    </head>
    <body>
        <button class="widget_trigger" id="italy">Show Italy</button>
        <button class="widget_trigger" id="france">Show France</button>
        <button class="widget_reset">Reset</button>
        <svg class='stack'>
        </svg>
        
        
        <script>
        
            // Select the first (and hopefully the only) <svg class="stack"> element
            var svg = d3.select('svg.stack');
            
            var h = 400; // canvas height
            var w = 600; // canvas width
            
            svg.attr('height',h)
            svg.attr('width',h)
            
            // stack graph logic here
            
            function update_widgets(widget_nations){
                // Select all present and future <g class="widget"> objects
                var widgets = svg.selectAll('g.widget')
                    .data(widget_nations)

                // if widget exists in the canvas and we don't want it anymore
                widgets.exit()
                    .remove()

                // if not exists then create
                widgets.enter()
                    .append('g')
                    .attr('class', 'widget')

                // Append a nice rectangle in every widget
                widgets.append('rect')
                    .attr('width', 50)
                    .attr('height', 20)
                    .attr('fill', 'orange')
            }
            
            // This array contains the objects representing the nations the user selected.
            var widget_nations = []
            
            // Temporary trigger for widegts
            d3.selectAll('.widget_trigger')
                .on('click', function(){
                    // widget_nations.push() // Later on, object should be directly passed as argument
                    // update_widgets(widget_nations)
                    console.log(this.id)
                    })

            d3.select('.widget_reset')
                .on('click', function(){
                    widget_nations = []
                    update_widgets(widget_nations)
                    })
            
            
        </script>
    </body>
</html>